<% include ../partials/header.ejs %>


    <div class="landing">
    <!-- couldn't figure out php, so this will have to to for now -->
    <!-- <form onsubmit="window.location = 'http://localhost:4567/encounters/' + search.value; return false;">
<label>RISK FACTOR BY ZIP CODE</label><br>
<input class="search" placeholder="5 Digit Zip Code" type="search" name="search"></input>
<input type="submit" value="Search">
</form>
</div> -->

<div id="mapid">MAP HERE</div>

<script>
// getEncounters = () => { return fetch('/geoEncounters.json').then(response => response.json()); };


    const mymap = L.map('mapid').setView([37.576990, -98.617800], 4.4);

    L.tileLayer(
        'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);

    // const markerHtmlStyles =` background-color: red; width:
    // 3rem; height: 3rem; display: block; left: -1.5rem; top: -1.5rem; position: relative; border-radius: 3rem 3rem 0; transform:
    // rotate(45deg); border:1px solid #FFFFFF`; const icon = Leaflet.divIcon({ className: "my-custom-pin", iconAnchor: [0, 24],
    // labelAnchor: [-6, 0], popupAnchor: [0, -36], html: `
    // <span style="${markerHtmlStyles}" />` });



    //  L.marker([37.576990, -98.617800]).addTo(mymap)
    //  .bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

    // L.circle([37.576990, -98.617800], 0, {
    //     color: 'red',
    //     fillColor: '#f03',
    //     fillOpacity: 0.5
    // }).addTo(mymap).bindPopup("I am a circle.");

    // var popup = L.popup();

    // function onMapClick(e) {
    //     popup
    //         .setLatLng(e.latlng)
    //         .setContent("You clicked the map at " + e.latlng.toString())
    //         .openOn(mymap);
    // }

    // mymap.on('click', onMapClick);


function addDataToMap(data, map) { var dataLayer = L.geoJson(data); dataLayer.addTo(map); } $.getJSON("encounters/geoEncounters.geojson",
function(data) { addDataToMap(data, map); });




</script>



    <% include ../partials/footer.ejs %>
